@model IEnumerable<dynamic>

@{
    Layout = null;
    ViewBag.Title = "Events Timeline";
}

<!DOCTYPE html>

<html>
    <head>
        <title>@ViewBag.Title</title>
        <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
        <script src="@Url.Content("~/Scripts/jquery-1.6.1.min.js")" type="text/javascript"></script>
<!-- For some reason this has to be loaded in the page's head, on the view file it throws an error -->
<script src="http://static.simile.mit.edu/timeline/api-2.3.0/timeline-api.js?bundle=true" type="text/javascript"></script>
        <script type="text/javascript">
$(function() {
    $("#mainmenu").hide();

    $("#mainmenuicon").click(function() {
        $("#mainmenu").toggle();
    });

        var eventSource = new Timeline.DefaultEventSource();
        var now = new Date();
        var target = new Date(new Date().setHours(now.getHours() - 3));

        var bands = [
            Timeline.createBandInfo({
                width: "90%",
                intervalUnit: Timeline.DateTime.HOUR,
                intervalPixels: 120,
                eventSource: eventSource,
                date: target
            }),
            Timeline.createBandInfo({
                width: "10%",
                intervalUnit: Timeline.DateTime.DAY,
                intervalPixels: 210,
                eventSource: eventSource,
                date: target,
                overview: true
            })
        ];

        bands[1].syncWith = 0;
        bands[1].highlight = true;

        Timeline.create(document.getElementById("eventstimeline"), bands);
        Timeline.loadJSON("http://localhost/dahlia/Timeline/EventData", function(json, url) { eventSource.loadJSON(json, url); });
});
        </script>
    </head>
    <body>
        <div class="page">
            <div id="header">
                <div id="title">
                    <span id="mainmenuicon"></span>
                    <h1>Dahlia</h1>
                </div>

                <ul id="mainmenu" class="menu">
                    <li>@Html.ActionLink("Home", "Index", "Home")</li>
                    <li>@Html.ActionLink("Schedule a Retreat", "New", "Retreat")</li>
                    <li>@Html.ActionLink("Manage Retreats", "Index", "ManageRetreats")</li>
                    <li>@Html.ActionLink("Register a Participant", "New", "Participant")</li>
                    <hr />
                    <li>@Html.ActionLink("View Participants", "List", "Participant")</li>
                    <li>@Html.ActionLink("Events Timeline", "Events", "Timeline")</li>
                </ul>
            </div>

            <div id="main">
                <div id="eventstimeline" style="height: 500px; border: 1px solid #AAAAAA"></div>
            </div>

            <div id="footer">
            </div>
        </div>
    </body>
</html>
